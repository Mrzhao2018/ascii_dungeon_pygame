# ğŸ”§ FPSæ˜¾ç¤ºä¿®å¤æŠ¥å‘Š

## ğŸ› é—®é¢˜æè¿°
è°ƒè¯•æ¨¡å¼ä¸­çš„FPSå€¼ä¸€ç›´æ˜¾ç¤ºä¸º0ï¼Œæ— æ³•æ­£ç¡®æ˜¾ç¤ºæ¸¸æˆçš„å®é™…å¸§ç‡ã€‚

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 
åœ¨ `game/debug.py` çš„ `_render_fps_counter` æ–¹æ³•ä¸­ï¼Œä½¿ç”¨äº†é”™è¯¯çš„FPSè·å–æ–¹å¼ï¼š

```python
# é”™è¯¯çš„æ–¹å¼ - åˆ›å»ºæ–°çš„Clockå¯¹è±¡
fps = pygame.time.Clock().get_fps()  # æ€»æ˜¯è¿”å›0
```

è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ï¼š
1. **æ–°å»ºClockå¯¹è±¡**: æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°çš„ `pygame.time.Clock()` å¯¹è±¡
2. **æœªç»tickè°ƒç”¨**: æ–°å»ºçš„Clockå¯¹è±¡ä»æœªè°ƒç”¨è¿‡ `tick()` æ–¹æ³•
3. **æ— å¸§ç‡å†å²**: `get_fps()` ä¾èµ–äºClockå¯¹è±¡å†…éƒ¨çš„å¸§ç‡å†å²è®°å½•

### æŠ€æœ¯ç»†èŠ‚
- `pygame.time.Clock.get_fps()` éœ€è¦å…ˆè°ƒç”¨ `Clock.tick()` å»ºç«‹å¸§ç‡å†å²
- æ¸¸æˆä¸»å¾ªç¯ä½¿ç”¨çš„æ˜¯ `self.clock` å¯¹è±¡ï¼Œè°ƒè¯•è¦†ç›–å±‚å´åˆ›å»ºäº†ç‹¬ç«‹çš„Clock
- ä¸¤ä¸ªClockå¯¹è±¡ä¹‹é—´æ²¡æœ‰æ•°æ®å…±äº«

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. ä¿®æ”¹è°ƒè¯•è¦†ç›–å±‚åˆå§‹åŒ–
**æ–‡ä»¶**: `game/debug.py`

æ·»åŠ Clockå¯¹è±¡å¼•ç”¨ï¼š
```python
def __init__(self, config, logger):
    # ... ç°æœ‰ä»£ç  ...
    # Clock for FPS calculation (will be set by game)
    self.clock = None
```

### 2. ä¿®æ”¹FPSè®¡ç®—æ–¹æ³•
**æ–‡ä»¶**: `game/debug.py` - `_render_fps_counter` æ–¹æ³•

```python
def _render_fps_counter(self, screen):
    try:
        # ä½¿ç”¨æ¸¸æˆçš„Clockå¯¹è±¡è€Œä¸æ˜¯åˆ›å»ºæ–°çš„
        if self.clock:
            fps = self.clock.get_fps()
        else:
            fps = 0  # æ²¡æœ‰Clockæ—¶æ˜¾ç¤º0
            
        # ... å…¶ä½™æ¸²æŸ“ä»£ç  ...
```

### 3. æ·»åŠ Clockè®¾ç½®æ–¹æ³•
**æ–‡ä»¶**: `game/renderer.py`

```python
def set_debug_clock(self, clock):
    """Set the clock object for FPS calculation in debug overlay"""
    if self.debug_overlay:
        self.debug_overlay.clock = clock
```

### 4. åœ¨æ¸¸æˆåˆå§‹åŒ–æ—¶è¿æ¥Clock
**æ–‡ä»¶**: `game/game.py` - `__init__` æ–¹æ³•

```python
# Game loop variables
self.clock = pygame.time.Clock()
self.running = True

# Set clock for debug overlay FPS calculation
if self.renderer and hasattr(self.renderer, 'set_debug_clock'):
    self.renderer.set_debug_clock(self.clock)
```

## ğŸ§ª æµ‹è¯•éªŒè¯

### ç‹¬ç«‹æµ‹è¯•
åˆ›å»ºäº† `test_fps_display.py` è¿›è¡Œç‹¬ç«‹éªŒè¯ï¼š
- âœ… Clockå¯¹è±¡æ­£ç¡®ä¼ é€’
- âœ… FPSè®¡ç®—è¿”å›æ­£ç¡®å€¼ (~60 FPS)
- âœ… æ˜¾ç¤ºåŠŸèƒ½æ­£å¸¸å·¥ä½œ

### é›†æˆæµ‹è¯•
åœ¨å®é™…æ¸¸æˆä¸­éªŒè¯ï¼š
- âœ… æ¸¸æˆå¯åŠ¨æ­£å¸¸
- âœ… è°ƒè¯•æ¨¡å¼FPSæ˜¾ç¤ºéé›¶å€¼
- âœ… F12åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- âœ… æ— é”™è¯¯æ—¥å¿—

## ğŸ“ˆ ä¿®å¤æ•ˆæœ

### ä¿®å¤å‰
```
FPS: 0.0  (ç°è‰²æ˜¾ç¤ºï¼Œè¡¨ç¤ºæ— æ•°æ®)
```

### ä¿®å¤å
```
FPS: 59.9  (ç»¿è‰²æ˜¾ç¤ºï¼Œè¡¨ç¤ºè‰¯å¥½æ€§èƒ½)
FPS: 45.2  (é»„è‰²æ˜¾ç¤ºï¼Œè¡¨ç¤ºä¸€èˆ¬æ€§èƒ½)
FPS: 18.5  (çº¢è‰²æ˜¾ç¤ºï¼Œè¡¨ç¤ºæ€§èƒ½é—®é¢˜)
```

### é¢œè‰²ç¼–ç 
- **ç»¿è‰²**: FPS â‰¥ 25 (è‰¯å¥½æ€§èƒ½)
- **é»„è‰²**: 20 â‰¤ FPS < 25 (ä¸€èˆ¬æ€§èƒ½)
- **çº¢è‰²**: FPS < 20 (æ€§èƒ½é—®é¢˜)
- **ç°è‰²**: FPS = 0 (æ— æ•°æ®/é”™è¯¯)

## ğŸ”§ æŠ€æœ¯æ”¹è¿›

### ä»£ç è´¨é‡æå‡
1. **å•ä¸€æ•°æ®æº**: æ‰€æœ‰FPSæ•°æ®æ¥æºäºæ¸¸æˆä¸»Clock
2. **é”™è¯¯å¤„ç†**: æ·»åŠ äº†Clockå¯¹è±¡ä¸å­˜åœ¨çš„å¤„ç†
3. **çŠ¶æ€æŒ‡ç¤º**: ç”¨é¢œè‰²æ ‡è¯†ä¸åŒçš„æ€§èƒ½çŠ¶æ€
4. **æ¨¡å—è§£è€¦**: é€šè¿‡æ–¹æ³•è°ƒç”¨ä¼ é€’Clockè€Œéç›´æ¥ä¾èµ–

### æ€§èƒ½å½±å“
- **æ— é¢å¤–å¼€é”€**: ä¸å†åˆ›å»ºå¤šä½™çš„Clockå¯¹è±¡
- **æ›´å‡†ç¡®**: FPSæ˜¾ç¤ºåæ˜ çœŸå®æ¸¸æˆæ€§èƒ½
- **æ›´åŠæ—¶**: å®æ—¶æ˜¾ç¤ºå½“å‰å¸§ç‡çŠ¶æ€

## ğŸ¯ ä½¿ç”¨è¯´æ˜

### æŸ¥çœ‹FPS
1. å¯åŠ¨æ¸¸æˆ: `python main.py --debug`
2. æŒ‰F12å¼€å¯è°ƒè¯•æ¨¡å¼
3. è§‚å¯Ÿå³ä¸Šè§’çš„FPSæ˜¾ç¤º
4. æˆ–è€…ä½¿ç”¨ `--show-fps` å‚æ•°ç›´æ¥æ˜¾ç¤º

### æ€§èƒ½ç›‘æ§
```bash
# å¯åŠ¨æ—¶ç›´æ¥æ˜¾ç¤ºFPS
python main.py --debug --show-fps

# è¿è¡Œæ—¶åˆ‡æ¢è°ƒè¯•æ¨¡å¼
# æ¸¸æˆä¸­æŒ‰F12å¼€å¯/å…³é—­è°ƒè¯•æ¨¡å¼
# å³ä¸Šè§’ä¼šæ˜¾ç¤ºå®æ—¶FPS
```

### è°ƒè¯•é¢æ¿
åœ¨è°ƒè¯•æ¨¡å¼ä¸‹æŒ‰æ•°å­—é”®ï¼š
- **1**: æ€§èƒ½ç›‘æ§é¢æ¿ (åŒ…å«è¯¦ç»†å¸§æ—¶é—´)
- **å³ä¸Šè§’**: FPSè®¡æ•°å™¨ (ç®€æ´æ˜¾ç¤º)

## ğŸ“š ç›¸å…³æ–‡ä»¶

### ä¿®æ”¹çš„æ–‡ä»¶
- âœ… `game/debug.py` - è°ƒè¯•è¦†ç›–å±‚FPSè®¡ç®—
- âœ… `game/renderer.py` - Clockå¯¹è±¡ä¼ é€’
- âœ… `game/game.py` - Clockå¯¹è±¡è®¾ç½®

### æ–°å¢çš„æ–‡ä»¶
- âœ… `test_fps_display.py` - FPSæ˜¾ç¤ºæµ‹è¯•è„šæœ¬

### æµ‹è¯•æ–‡ä»¶
- âœ… æ¸¸æˆä¸»å¾ªç¯æµ‹è¯•
- âœ… ç‹¬ç«‹FPSæ˜¾ç¤ºæµ‹è¯•
- âœ… è°ƒè¯•æ¨¡å¼åˆ‡æ¢æµ‹è¯•

## ğŸš€ åç»­æ”¹è¿›å»ºè®®

### çŸ­æœŸä¼˜åŒ–
1. **å¹³å‡FPS**: æ˜¾ç¤ºä¸€æ®µæ—¶é—´å†…çš„å¹³å‡FPS
2. **FPSå†å²**: è®°å½•FPSå˜åŒ–æ›²çº¿
3. **æ€§èƒ½è­¦å‘Š**: FPSè¿‡ä½æ—¶çš„æ˜ç¡®æç¤º

### é•¿æœŸæ‰©å±•
1. **å›¾å½¢åŒ–FPS**: ç”¨å›¾è¡¨æ˜¾ç¤ºFPSè¶‹åŠ¿
2. **æ€§èƒ½åˆ†æ**: ç»“åˆå¸§æ—¶é—´åˆ†ææ€§èƒ½ç“¶é¢ˆ
3. **è‡ªåŠ¨ä¼˜åŒ–**: æ ¹æ®FPSè‡ªåŠ¨è°ƒæ•´æ¸¸æˆè®¾ç½®

---

**ä¿®å¤çŠ¶æ€**: âœ… å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**: âœ… é€šè¿‡  
**éƒ¨ç½²çŠ¶æ€**: âœ… å°±ç»ª  

ğŸ® **FPSæ˜¾ç¤ºç°åœ¨æ­£å¸¸å·¥ä½œï¼Œå¯ä»¥å‡†ç¡®åæ˜ æ¸¸æˆæ€§èƒ½ï¼** âœ¨