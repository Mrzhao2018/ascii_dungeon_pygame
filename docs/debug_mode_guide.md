# 🔧 调试模式使用指南

## 概述
游戏现在支持运行时切换调试模式，让玩家可以随时查看游戏内部状态和性能信息。

## 🎮 基本操作

### 切换调试模式
- **F12**: 开启/关闭调试模式
- 初始状态：调试模式关闭
- 可在游戏运行的任何时候切换

### 调试模式状态显示
开启调试模式时，游戏会显示：
- 游戏日志中显示："Debug mode enabled - Press 1-5 to toggle panels, F12 to disable"
- 屏幕左下角显示调试日志面板

关闭调试模式时：
- 游戏日志中显示："Debug mode disabled"
- 所有调试面板隐藏

## 🔍 调试面板详解

### 1️⃣ 性能监控面板 (按键: 1)
显示内容：
- 帧率时间统计
- 渲染性能
- 游戏更新时间
- 性能警告（红色/黄色标识）

### 2️⃣ 游戏状态面板 (按键: 2)  
显示内容：
- 当前楼层
- 地图尺寸
- 相机位置
- 对话状态
- 楼层切换状态

### 3️⃣ 玩家状态面板 (按键: 3)
显示内容：
- 玩家坐标
- 生命值 (HP)
- 体力值 (Stamina)
- 冲刺冷却时间
- 移动冷却时间
- 无敌帧时间

### 4️⃣ 实体调试面板 (按键: 4)
显示内容：
- 敌人数量
- NPC数量
- 总实体数量

### 5️⃣ 日志面板 (按键: 5)
显示内容：
- 最近8条游戏日志
- 不同级别的日志颜色标识：
  - 白色：普通信息
  - 黄色：警告信息
  - 红色：错误信息
  - 蓝色：调试信息

## 💡 使用技巧

### 开发调试
```bash
# 启动游戏但不开启调试模式
python main.py

# 游戏中按F12开启调试模式
# 按1-5切换不同面板
# 再按F12关闭调试模式
```

### 性能分析
1. 按F12开启调试模式
2. 按1显示性能监控面板
3. 观察帧率和渲染时间
4. 红色数值表示性能问题

### 状态调试
1. 按F12开启调试模式
2. 按3显示玩家状态面板
3. 观察体力、生命值等实时变化
4. 体力低时数值显示为黄色，生命值低时显示为红色

### 实体监控
1. 按F12开启调试模式
2. 按4显示实体调试面板
3. 查看场景中的敌人和NPC数量

## 🎯 实战示例

### 场景1：性能调试
```
1. 启动游戏: python main.py --map-width 200 --map-height 100
2. 按F12开启调试模式
3. 按1显示性能面板
4. 如果看到红色数值，说明地图太大导致性能问题
5. 按F12关闭调试模式，享受游戏
```

### 场景2：战斗状态监控
```
1. 在游戏中遇到敌人
2. 按F12开启调试模式  
3. 按3显示玩家状态面板
4. 观察战斗中的体力和生命值变化
5. 按4显示实体面板，查看敌人数量
6. 战斗结束后按F12关闭调试模式
```

### 场景3：楼层切换调试
```
1. 接近楼层出口（X标记）
2. 按F12开启调试模式
3. 按2显示游戏状态面板
4. 观察楼层切换过程中的状态变化
5. 进入新楼层后确认信息更新
```

## ⚠️ 注意事项

### 性能影响
- 调试模式会轻微影响游戏性能
- 建议正常游戏时关闭调试模式
- 多个面板同时显示会占用更多资源

### 面板位置
- 各面板有固定位置，避免重叠
- 日志面板会根据屏幕大小自动调整
- 面板背景半透明，不会完全遮挡游戏

### 持久化设置
- 调试模式状态会保存到配置文件
- 下次启动游戏时保持上次的调试模式设置
- 面板显示状态不会持久化，每次都需要重新切换

## 🔧 开发者高级功能

### 配合性能监控工具
```bash
# 启动外部性能监控
python tools/performance_monitor.py --live &

# 启动游戏
python main.py

# 在游戏中按F12 + 1查看内置性能面板
# 对比内外部监控数据
```

### 配合测试模式
```bash
# 启动测试模式
python main.py --test-mode

# 按F12开启调试模式
# 按5查看详细测试日志
# 按2监控游戏状态变化
```

---

**调试愉快！** 🎮✨